---
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "@lib/utils";
import type { HTMLAttributes } from "astro/types";
import Icon from "./Icon.astro";

const buttonVariants = cva("p-2", {
	variants: {
		variant: {
			"git-pull-request": "bg-violet-400 hover:bg-violet-500",
			issue: "bg-lime-400 hover:bg-lime-500",
			other: "bg-violet-400 hover:bg-violet-500",
		},
	},
	defaultVariants: {
		variant: "other",
	},
});

interface Props
	extends HTMLAttributes<"button">,
		VariantProps<typeof buttonVariants> {
	url: string;
}

const { variant, url } = Astro.props;
---

<a
	href={url}
	class="flex align-middle"
>
	<button
		class={cn(
			buttonVariants({ variant }),
			"my-auto rounded-full border border-b-4 border-r-4 border-black active:border-b-2 active:border-r-2",
		)}
	>
		{
			variant === "git-pull-request" ? (
				<Icon
					class="h-6 w-6"
					icon="git-pull-request"
				/>
			) : variant === "issue" ? (
				<Icon
					class="h-6 w-6"
					icon="git-bug"
				/>
			) : (
				<Icon
					class="h-6 w-6"
					icon="external-link"
				/>
			)
		}
	</button>
</a>
