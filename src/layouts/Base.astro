---
import Fonts from "@components/Fonts.astro";
import Footer from "@components/Footer.astro";
import Navigation from "@components/Navigation.astro";
import "../styles/global.css";

interface Props {
	title?: string;
	description?: string;
}

const {
	title = "Jay Parry",
	description = "Jay Parry's Software Developer Portfolio",
} = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link
			rel="icon"
			type="image/svg+xml"
			href="/favicon.svg"
		/>

		<link
			rel="sitemap"
			href="/sitemap-index.xml"
		/>

		<meta
			name="viewport"
			content="width=device-width"
		/>
		<meta
			name="generator"
			content={Astro.generator}
		/>
		<script
			is:inline
			src="https://identity.netlify.com/v1/netlify-identity-widget.js"
		></script>

		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta
			name="title"
			content={title}
		/>
		<meta
			name="description"
			content={description}
		/>

		<!-- Open Graph / Facebook -->
		<meta
			property="og:type"
			content="website"
		/>
		<meta
			property="og:url"
			content={Astro.url}
		/>
		<meta
			property="og:title"
			content={title}
		/>
		<meta
			property="og:description"
			content={description}
		/>

		<!-- Twitter -->
		<meta
			property="twitter:card"
			content="summary"
		/>
		<meta
			property="twitter:url"
			content={Astro.url}
		/>
		<meta
			property="twitter:title"
			content={title}
		/>
		<meta
			property="twitter:description"
			content={description}
		/>

		<!-- Apply fonts -->
		<Fonts />

		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.16.0/devicon.min.css"
		/>
	</head>
	<body
		class="min-h-screen bg-zinc-100 font-mono leading-6 selection:bg-red-300/40"
	>
		<Navigation />

		<main class="mx-auto max-w-2xl px-6 pb-9">
			<slot />

			<div class="mt-12">{/* spacer element */}</div>
			<Footer />
		</main>

		<script>
			if (window.netlifyIdentity) {
				window.netlifyIdentity.on("init", (user: any) => {
					if (!user) {
						window.netlifyIdentity.on("login", () => {
							document.location.href = "/admin/";
						});
					}
				});
			}
		</script>
	</body>
</html>
